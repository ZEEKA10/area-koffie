<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Area Coffee - Manage Categories</title>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@3.9.4/dist/full.css" rel="stylesheet" type="text/css" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body class="bg-base-200 flex items-center justify-center min-h-screen p-4">
    <div class="card w-full max-w-lg bg-base-100 shadow-xl" x-data="{ 
        newCategory: '',
        categories: [
            { id: 1, nama_kategori: 'Coffee' },
            { id: 2, nama_kategori: 'Tea' },
            { id: 3, nama_kategori: 'Pastries' }
        ],
        editingId: null,
        editingName: '',
        addCategory() {
            if (this.newCategory.trim() !== '') {
                this.categories.push({
                    id: this.categories.length + 1,
                    nama_kategori: this.newCategory.trim()
                });
                this.newCategory = '';
            }
        },
        startEdit(category) {
            this.editingId = category.id;
            this.editingName = category.nama_kategori;
        },
        saveEdit() {
            const index = this.categories.findIndex(c => c.id === this.editingId);
            if (index !== -1 && this.editingName.trim() !== '') {
                this.categories[index].nama_kategori = this.editingName.trim();
            }
            this.cancelEdit();
        },
        cancelEdit() {
            this.editingId = null;
            this.editingName = '';
        },
        deleteCategory(id) {
            this.categories = this.categories.filter(category => category.id !== id);
            if (this.editingId === id) {
                this.cancelEdit();
            }
        }
    }">
        <div class="card-body">
            <h2 class="card-title justify-center mb-4">Manage Categories</h2>
            <form @submit.prevent="addCategory">
                <div class="form-control w-full mb-4">
                    <label class="label" for="newCategory">
                        <span class="label-text">New Category Name</span>
                    </label>
                    <div class="flex space-x-2">
                        <input type="text" id="newCategory" placeholder="Enter category name" class="input input-bordered w-full" x-model="newCategory" required />
                        <button type="submit" class="btn btn-primary">Add</button>
                    </div>
                </div>
            </form>
            <div class="divider"></div>
            <h3 class="text-lg font-semibold mb-2">Existing Categories</h3>
            <ul class="space-y-2">
                <template x-for="category in categories" :key="category.id">
                    <li class="flex justify-between items-center">
                        <template x-if="editingId !== category.id">
                            <span x-text="category.nama_kategori"></span>
                        </template>
                        <template x-if="editingId === category.id">
                            <input type="text" class="input input-bordered input-sm" x-model="editingName" @keyup.enter="saveEdit" @keyup.escape="cancelEdit" />
                        </template>
                        <div class="space-x-2">
                            <template x-if="editingId !== category.id">
                                <button @click="startEdit(category)" class="btn btn-sm btn-info">Edit</button>
                            </template>
                            <template x-if="editingId === category.id">
                                <div class="space-x-2">
                                    <button @click="saveEdit" class="btn btn-sm btn-success">Save</button>
                                    <button @click="cancelEdit" class="btn btn-sm btn-warning">Cancel</button>
                                </div>
                            </template>
                            <button @click="deleteCategory(category.id)" class="btn btn-sm btn-error">Delete</button>
                        </div>
                    </li>
                </template>
            </ul>
        </div>
    </div>
</body>
</html>

